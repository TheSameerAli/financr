<div class="columns">
    <div class="column is-one-fifth">
        <app-account-page-menu></app-account-page-menu>
    </div>

    <div class="column">

        <div *ngIf="account" class="level">
            <div class="level-left">
                <div class="level-item">
                    <div class="title is-4"><i class="fa fa-money-check-alt has-text-success"></i> <span
                            class="has-margin-left-10">{{account.name}} <span
                            [class.current-account-color]="account.type === accountType.Current"
                            [class.business-account-color]="account.type === accountType.Business"
                            [class.credit-card-account-color]="account.type === accountType.CreditCard"
                            [class.savings-account-color]="account.type === accountType.Savings"
                            class="tag has-margin-left-10 ">{{accountType[account.type]}}</span></span></div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item"><button type="button"
                        class="button is-small">{{currentDate | date: 'MMMM yyyy'}}</button></div>
            </div>
        </div>

        <div class="columns">
            <div class="column">
                <div *ngIf="account" class="box notification" [class.is-success]="account.availableBalance >= 0" [class.is-danger]="account.availableBalance < 0">
                    <div class="heading">Available Balance</div>
                    <div class="title">{{account.availableBalance | currency: 'GBP'}}</div>
                    <div class="level">
                        <div class="level-item">
                            <div>
                                <div class="heading">Total Income</div>
                                <div class="title is-5"> <i class="fas fa-caret-up"></i> {{account.totalIncome | currency: 'GBP'}}</div>
                            </div>
                        </div>
                        <div class="level-item">
                            <div>
                                <div class="heading">Total Outgoing</div>
                                <div class="title is-5"> <i class="fas fa-caret-down"></i> {{account.totalOutgoings * -1 | currency: 'GBP'}}</div>
                            </div>
                        </div>
                        <div class="level-item">
                            <div>
                                <div class="heading">Conversion</div>
                                <div class="title is-5" *ngIf="account.totalIncome && account.totalOutgoings">{{((account.totalOutgoings / account.totalIncome) * 100) * -1 | number: '1.0-2'}}%</div>
                                <div class="title is-5" *ngIf="!account.totalIncome || !account.totalOutgoings">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="column">
                <div class="box notification is-secondary">
                    <div class="heading">Available Budget Remaining</div>
                    <div class="title" *ngIf="account && account.budget">{{budget.available | currency: 'GBP'}}</div>
                    <div class="title" *ngIf="!account || !account.budget">--</div>
                    <div class="level">
                        <div class="level-item">
                            <div>
                                <div class="heading">Total Budget</div>
                                <div class="title is-5" *ngIf="account && account.budget">{{budget.total | currency: 'GBP'}}</div>
                                <div class="title is-5" *ngIf="!account || !account.budget">--</div>
                            </div>
                        </div>
                        <div class="level-item">
                            <div>
                                <div class="heading">Spent</div>
                                <div class="title is-5" *ngIf="account && account.budget">{{budget.spent | currency: 'GBP'}}</div>
                                <div class="title is-5" *ngIf="!account || !account.budget">--</div>
                            </div>
                        </div>
                        <div class="level-item">
                            <div>
                                <div class="heading">% Spent</div>
                                <div class="title is-5" *ngIf="account && account.budget">{{((budget.spent / budget.total) * 100) | number: '1.0-0'}}%</div>
                                <div class="title is-5" *ngIf="!account || !account.budget">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="column">
                <app-transactions-panel 
                [transactions]="recentTransactions" 
                [accountId]="accountId" panelTitle="Recent Transactions"></app-transactions-panel>
            </div>
            <div class="column">
               <app-financial-breakdown *ngIf="transactions && allTransactions" [allTransactions]="allTransactions" [monthlyTransactions]="transactions"></app-financial-breakdown>
            </div>
        </div>

    </div>
</div>